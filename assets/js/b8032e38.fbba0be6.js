"use strict";(self.webpackChunk_0_l_documentation=self.webpackChunk_0_l_documentation||[]).push([[7361],{4292:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=n(5893),r=n(1151);const t={sidebar_position:5,sidebar_label:"Genesis Ceremony",description:"Launch the 0L Network"},o="Genesis Ceremony",a={id:"validators/genesis",title:"Genesis Ceremony",description:"Launch the 0L Network",source:"@site/docs/validators/genesis.md",sourceDirName:"validators",slug:"/validators/genesis",permalink:"/validators/genesis",draft:!1,unlisted:!1,editUrl:"https://github.com/0LNetworkCommunity/documentation/edit/main/docs/validators/genesis.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,sidebar_label:"Genesis Ceremony",description:"Launch the 0L Network"},sidebar:"tutorialSidebar",previous:{title:"Restore",permalink:"/validators/restore"},next:{title:"Post-Genesis Ceremony Registration",permalink:"/validators/register"}},l={},d=[{value:"The Purpose of the Genesis Ceremony",id:"the-purpose-of-the-genesis-ceremony",level:2},{value:"High Level Ceremony Steps",id:"high-level-ceremony-steps",level:2},{value:"Genesis Ceremony Steps",id:"genesis-ceremony-steps",level:2},{value:"1. Cleanup",id:"1-cleanup",level:3},{value:"2. Prepare <code>.libra</code> directory and add GitHub PAT (use classic with repo privileges)",id:"2-prepare-libra-directory-and-add-github-pat-use-classic-with-repo-privileges",level:3},{value:"3. Fetch source &amp; verify commit hash",id:"3-fetch-source--verify-commit-hash",level:3},{value:"4. Export genesis ceremony repository as environment variable",id:"4-export-genesis-ceremony-repository-as-environment-variable",level:3},{value:"5. Install the source",id:"5-install-the-source",level:3},{value:"6. Genesis Registration",id:"6-genesis-registration",level:3},{value:"7. PR Received",id:"7-pr-received",level:3},{value:"8. PR Merged",id:"8-pr-merged",level:3},{value:"9. Build JSON_Legacy from snapshot and ancestry",id:"9-build-json_legacy-from-snapshot-and-ancestry",level:3},{value:"10. All nodes added to <code>layout.yaml</code> users key",id:"10-all-nodes-added-to-layoutyaml-users-key",level:3},{value:"11. Make Genesis",id:"11-make-genesis",level:3},{value:"12. Start nodes!",id:"12-start-nodes",level:3}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"genesis-ceremony",children:"Genesis Ceremony"}),"\n",(0,i.jsx)(s.p,{children:"This guide outlines the essential steps for conducting a Genesis Ceremony in the 0L Network."}),"\n",(0,i.jsx)(s.h2,{id:"the-purpose-of-the-genesis-ceremony",children:"The Purpose of the Genesis Ceremony"}),"\n",(0,i.jsx)(s.p,{children:"A Genesis Ceremony is a pivotal event marking the creation of the network's genesis block \u2014 the foundational block that\nunderpins the entire blockchain.\nThe genesis of a network can begin with a blank state (0 balances) or with preserving the state of an earlier chain and\nmigrate to the new chain during the genesis ceremony. The latter approach is also known as a fork.\nIt is a crucial process that not only initiates the network but also involves migrating the network's state from an\nearlier version to the next version."}),"\n",(0,i.jsx)(s.p,{children:"Follow this document to navigate the process effectively, ensuring a smooth and successful launch or upgrade of the 0L\nNetwork."}),"\n",(0,i.jsx)(s.h2,{id:"high-level-ceremony-steps",children:"High Level Ceremony Steps"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Cleanup"}),"\n",(0,i.jsxs)(s.li,{children:["Prepare ",(0,i.jsx)(s.code,{children:".libra"})," Directory and Add GitHub PAT"]}),"\n",(0,i.jsx)(s.li,{children:"Fetch Source & Verify Commit Hash"}),"\n",(0,i.jsxs)(s.li,{children:["Build ",(0,i.jsx)(s.code,{children:"libra-framework"})," Packages"]}),"\n",(0,i.jsxs)(s.li,{children:["Pre-Genesis Registration","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Stop"}),": Wait for the coordinator to merge all PR's. Step 8 can be done while you wait"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"PR Received"}),"\n",(0,i.jsx)(s.li,{children:"PR Merged"}),"\n",(0,i.jsx)(s.li,{children:"Build JSON_Legacy"}),"\n",(0,i.jsxs)(s.li,{children:["All Nodes Added to ",(0,i.jsx)(s.code,{children:"layout.yaml"})," Users Key","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Wait for the Coordinator"}),": Wait for the coordinator post-pre-genesis set closure and to add all genesis participants."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Pull from Genesis Repo and Build","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Wait for the Coordinator"}),": Wait for the coordinator's signal to start."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"Start Nodes!"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Coordination happens via the 0L Discord server voice channels, and a Google Sheet will track participants at each. Each\nstep requires careful attention to the coordinator's instructions."}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsx)(s.p,{children:"Only proceed with asynchronous steps after the coordinator confirms the previous sequential blocking steps as completed."})}),"\n",(0,i.jsx)(s.h2,{id:"genesis-ceremony-steps",children:"Genesis Ceremony Steps"}),"\n",(0,i.jsx)(s.h3,{id:"1-cleanup",children:"1. Cleanup"}),"\n",(0,i.jsxs)(s.p,{children:["1.1 If you have participated in testnets, delete any previous forks of testnet repos (such\nas ",(0,i.jsx)(s.code,{children:"release-v6.9.0-rc.0-genesis-2"}),") from your GitHub repositories."]}),"\n",(0,i.jsxs)(s.p,{children:["1.2 Previous clones and testnets leave data in the ",(0,i.jsx)(s.code,{children:".libra"})," directory, clean those up by removing these directories:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"rm -Rf ~/libra-framework\nrm -Rf ~/.libra/data && rm -Rf ~/.libra/genesis && rm -Rf ~/.libra/secure-data.json\n"})}),"\n",(0,i.jsx)(s.p,{children:"1.3 Retrieve Validator address and paste it aside:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"grep 'account_address' ~/.libra/public-keys.yaml\n"})}),"\n",(0,i.jsx)(s.p,{children:"1.4 Fetch your external Static IP and set it aside:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"curl -s ipinfo.io | jq .ip\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsxs)(s.strong,{children:["Enter your Validator Address, Operator Name, and Static IP in the ",(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})}),"\n"]}),"\n",(0,i.jsxs)(s.h3,{id:"2-prepare-libra-directory-and-add-github-pat-use-classic-with-repo-privileges",children:["2. Prepare ",(0,i.jsx)(s.code,{children:".libra"})," directory and add GitHub PAT (use classic with repo privileges)"]}),"\n",(0,i.jsxs)(s.p,{children:["Acquire ",(0,i.jsx)(s.a,{href:"https://github.com/settings/tokens",children:"GitHub Personal Access Token (PAT)"})," with repo privileges. Paste it aside."]}),"\n",(0,i.jsx)(s.p,{children:"Setup the data and configs directory:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"mkdir ~/.libra/\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Paste your GitHub PAT in the ",(0,i.jsx)(s.code,{children:"~/.libra/github_token.txt"})," file:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"nano ~/.libra/github_token.txt\n"})}),"\n",(0,i.jsx)(s.h3,{id:"3-fetch-source--verify-commit-hash",children:"3. Fetch source & verify commit hash"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'cd ~\ngit clone https://github.com/0LNetworkCommunity/libra-framework\ncd ~/libra-framework\ngit fetch --all && git checkout main (or a specific branch as instructed by the coordinator)\n\n# Ensure the commit hash matches your peers and the coordinator\ngit log -n 1 --pretty=format:"%H"\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.strong,{children:["Provide git hash in the ",(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsxs)(s.strong,{children:['Confirm with "done" in the ',(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"4-export-genesis-ceremony-repository-as-environment-variable",children:"4. Export genesis ceremony repository as environment variable"}),"\n",(0,i.jsx)(s.p,{children:"Export the genesis ceremony repository as an environment variable:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"export GIT_REPO=release-v6.9.0-genesis-registration\n"})}),"\n",(0,i.jsxs)(s.p,{children:["If your directory structure setup is different from the default, you can override the defaults by exporting the following environment variables: ",(0,i.jsx)(s.code,{children:"SOURCE_PATH"}),", ",(0,i.jsx)(s.code,{children:"BINS_PATH"}),", ",(0,i.jsx)(s.code,{children:"DATA_PATH"}),". See the ",(0,i.jsx)(s.a,{href:"https://github.com/0LNetworkCommunity/libra-framework/blob/03d9f10bb539bda4c3f9de96e4a411971ec88d80/tools/genesis/Makefile#L7",children:"Makefile"})," for more details."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"To use many of our genesis CLI tooling, we have to switch to its directory:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cd ~/libra-framework/tools/genesis\n"})}),"\n",(0,i.jsx)(s.h3,{id:"5-install-the-source",children:"5. Install the source"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"make install\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsxs)(s.strong,{children:['Confirm with "done" in the ',(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"6-genesis-registration",children:"6. Genesis Registration"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"make register\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsxs)(s.strong,{children:['Confirm with "done" in the ',(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"warning",children:(0,i.jsx)(s.p,{children:"Please wait for the coordinator at this step."})}),"\n",(0,i.jsx)(s.h3,{id:"7-pr-received",children:"7. PR Received"}),"\n",(0,i.jsx)(s.p,{children:"(coordinator confirms)"}),"\n",(0,i.jsx)(s.h3,{id:"8-pr-merged",children:"8. PR Merged"}),"\n",(0,i.jsx)(s.p,{children:"(coordinator merges your PR)"}),"\n",(0,i.jsx)(s.h3,{id:"9-build-json_legacy-from-snapshot-and-ancestry",children:"9. Build JSON_Legacy from snapshot and ancestry"}),"\n",(0,i.jsx)(s.p,{children:"Export the epoch from which legacy is built:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"export EPOCH=694\n"})}),"\n",(0,i.jsx)(s.p,{children:"Build the legacy json:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"make legacy\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsxs)(s.strong,{children:["Confirm ",(0,i.jsx)(s.code,{children:"v5_recovery.json"})," md5 hash in the ",(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})}),"\n"]}),"\n",(0,i.jsxs)(s.h3,{id:"10-all-nodes-added-to-layoutyaml-users-key",children:["10. All nodes added to ",(0,i.jsx)(s.code,{children:"layout.yaml"})," users key"]}),"\n",(0,i.jsx)(s.admonition,{type:"warning",children:(0,i.jsx)(s.p,{children:"Please wait for the coordinator. Pre-genesis set closes here."})}),"\n",(0,i.jsx)(s.h3,{id:"11-make-genesis",children:"11. Make Genesis"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"make genesis\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:['Confirm with "done" in the ',(0,i.jsxs)(s.strong,{children:[(0,i.jsx)(s.a,{href:"https://docs.google.com/spreadsheets/d/17mF8Trg4xkUEkpJH9yTjVWRWx6ugYBRTMcuXscafhlI/edit?pli=1#gid=2041290571",children:"Genesis Worksheet"}),"."]})]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"warning",children:(0,i.jsx)(s.p,{children:"Please wait for the coordinator."})}),"\n",(0,i.jsx)(s.h3,{id:"12-start-nodes",children:"12. Start nodes!"}),"\n",(0,i.jsx)(s.p,{children:"Wait for the coordinator, say a prayer, then start!"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"libra node\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"End Of The Genesis Ceremony Steps."})})]})}function h(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>o});var i=n(7294);const r={},t=i.createContext(r);function o(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);